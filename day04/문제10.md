# 📌 DynamoDB 재해 복구 설계 (RPO 15분 / RTO 1시간)

## 📝 문제

회사는 Amazon DynamoDB를 사용하여 고객 정보를 저장하는 쇼핑 애플리케이션을 운영한다.

데이터 손상 발생 시 다음 요구사항을 충족해야 한다.

- RPO (Recovery Point Objective) = 15분
- RTO (Recovery Time Objective) = 1시간

---

## 1️⃣ 요구사항 분석

### 🔹 RPO 15분

RPO는 "얼마나 최신 시점까지 데이터를 복구할 수 있어야 하는가"를 의미한다.

- 최대 허용 데이터 손실: 15분
- 최소 15분 단위 이하의 백업/복구 기능 필요

---

### 🔹 RTO 1시간

RTO는 "장애 발생 후 얼마 안에 시스템을 정상화해야 하는가"를 의미한다.

- 1시간 이내 복구 완료 필요
- 복구 절차가 단순하고 신속해야 함

---

## 2️⃣ 관련 AWS 서비스 분석

### 🔹 DynamoDB Point-in-Time Recovery (PITR)

- 최근 35일 이내의 특정 시점으로 복구 가능
- 초 단위 복구 지원
- 연속 자동 백업
- 운영 오버헤드 낮음

✔ 15분 RPO 충족 가능  
✔ 1시간 RTO 충족 가능  
✔ 관리 간편

---

### 🔹 DynamoDB Global Tables

- 여러 리전에 자동 복제
- 리전 장애 대응 가능
- 고가용성 제공

⚠ 단점:
- 데이터 손상 시 손상 데이터도 다른 리전에 복제됨
- 논리적 데이터 오류 복구에는 부적합

→ 이 문제는 "리전 장애"가 아니라 "데이터 손상" 상황임

---

### 🔹 Amazon S3 Glacier 백업

- 장기 보관용
- 복구 시간 길어짐
- 일일 백업 시 RPO = 24시간

→ 15분 RPO 충족 불가  
→ 1시간 RTO 충족 어려움

---

### 🔹 EBS 스냅샷

- EBS 볼륨 백업 방식
- DynamoDB는 관리형 서비스로 EBS 기반 아님

→ 구조적으로 적합하지 않음

---

## 3️⃣ 선택지 분석

### ❌ 선택지 1  
DynamoDB Global Tables 구성

- 리전 장애 대응 목적
- 데이터 손상 복구 목적에는 부적합

---

### ✅ 선택지 2  
DynamoDB 특정 시점 복구(PITR) 구성

- 35일 내 원하는 시점 복구 가능
- 15분 RPO 충족
- 1시간 RTO 충족 가능
- 운영 복잡도 낮음

→ 요구사항 완벽 충족

---

### ❌ 선택지 3  
S3 Glacier로 내보내기

- 복구 느림
- RPO/RTO 요구사항 충족 불가

---

### ❌ 선택지 4  
15분마다 EBS 스냅샷 생성

- DynamoDB와 구조적으로 맞지 않음
- 운영 오버헤드 증가

---

## 🎯 최종 정답

> **선택지 2번 — DynamoDB Point-in-Time Recovery (PITR)**

---

##  시험 핵심 포인트 정리

| 상황 | 권장 서비스 |
|------|------------|
| DynamoDB + 데이터 손상 복구 | PITR |
| DynamoDB + 리전 장애 대비 | Global Tables |
| 장기 보관 | S3 Glacier |
| EC2/EBS 기반 백업 | EBS Snapshot |

---

##  핵심 구분

- 리전 장애 → Global Tables
- 데이터 손상 → PITR

이 둘을 구분하는 것이 문제의 핵심이다.