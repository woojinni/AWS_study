## ✅ 문제 2) 공용 로드 밸런서 + 쿼리 문자열 기반 라우팅 + 트래픽 암호화

### 🧩 문제 요약
의료 수술 로봇 솔루션에서 백엔드 서비스와 안정적으로 통신하기 위해 **AWS의 공용 로드 밸런서**가 필요하다.  
추가로 다음 조건을 만족해야 한다.

- **쿼리 문자열(Query String)** 을 기준으로 **다른 대상 그룹(Target Group)** 으로 라우팅할 수 있어야 한다.
- **트래픽은 암호화(HTTPS/TLS)** 되어야 한다.

---
## 1️⃣ AWS 클라우드의 공용 로드 밸런서
> ![alt text](image3.png)

로드 밸런서는 웹사이트나 앱으로 들어오는 요청을 여러 서버에 분산시켜  
과부하를 막고 안정적으로 서비스를 제공하도록 돕는 서비스다.  

AWS의 로드 밸런서는 동작 계층(OSI 계층)에 따라 종류가 나뉜다.

---

### 🌐 Application Load Balancer (ALB)
ALB는 **7계층(애플리케이션 계층)** 에서 동작하며, HTTP/HTTPS 트래픽을 처리한다.

- 고가용성과 자동 확장 기능을 제공하여 안정적인 통신을 지원한다.  
  → 사용자가 많아지면 자동으로 시스템을 확장해 서비스 중단 가능성을 줄인다.
- 전 세계적으로 분산된 AWS 인프라를 기반으로 일관된 성능을 제공한다.  
  → 지역이 달라도 안정적인 응답을 기대할 수 있다.
- **쿼리 문자열, 경로(Path), 헤더(Header)** 등을 기준으로 라우팅 규칙을 설정할 수 있다.  
  → 요청 URL에 포함된 정보를 기반으로 “어디로 보낼지”를 세밀하게 결정할 수 있다.

---

### 🔌 Network Load Balancer (NLB)
NLB는 **4계층(전송 계층)** 에서 동작하며 TCP/UDP 트래픽을 처리한다.

- 매우 낮은 지연 시간을 제공한다.
- 초당 수백만 요청을 처리할 수 있어 고성능/고처리량 환경에 적합하다.

다만, 4계층 로드 밸런서는 HTTP 요청 내부 구조(쿼리 문자열 등)를 해석하지 못한다.

---

### 🛡 Gateway Load Balancer (GWLB)
GWLB는 **3계층(네트워크 계층)** 중심으로 사용되며,  
주로 방화벽/침입탐지(IDS/IPS) 같은 **네트워크 보안 어플라이언스**를 붙이는 용도다.

- 트래픽 중계 및 네트워크 보안 기능 통합에 적합하다.
- 일반적인 웹 트래픽 라우팅(ALB처럼) 목적과는 다르다.

---

### 🕰 Classic Load Balancer (CLB)
CLB는 AWS의 초기 로드 밸런서다.

- 4계층(TCP) + 7계층(HTTP/HTTPS) 기능을 일부 지원한다.
- 기본적인 로드 밸런싱 기능을 제공한다.

다만 시험과 실무 모두에서 신규 설계는 ALB/NLB 위주로 선택하는 경우가 많다.

---

## 2️⃣ 로드 밸런서 트래픽 암호화
### 🔐 AWS Certificate Manager (ACM)
ACM은 SSL/TLS 인증서를 생성, 관리, 배포하기 위한 서비스다.

- 인증서를 쉽게 발급하고 적용할 수 있다.
- 자동 갱신 기능을 제공해 관리 부담을 줄인다.

- **SSL/TLS 인증서**  
  → 웹사이트(서비스)가 “안전한 통신”을 한다는 것을 증명하는 디지털 인증서다.

---

## ✅ 정답 판단 포인트
이 문제에서 가장 결정적인 키워드는 다음 두 가지다.

- **쿼리 문자열 기반 라우팅** → HTTP 요청 내용을 봐야 한다 → **7계층 기능 필요**
- **트래픽 암호화** → HTTPS/TLS 적용 필요 → **ACM 인증서 사용**

따라서, HTTP 레벨 라우팅(쿼리 문자열)을 지원하는 **ALB**가 필요한 상황이다.

---

## 🔎 선택지 분석

이 문제의 핵심은 다음 두 가지다.

1. **쿼리 문자열 기반 라우팅이 가능한가?**
2. **트래픽 암호화(SSL/TLS)를 지원하는가?**

이 기준으로 각 선택지를 검토한다.

---

### ✅ 선택지 1
**ACM 인증서 + Application Load Balancer(ALB) + 쿼리 매개변수 기반 라우팅**

ALB는 7계층(애플리케이션 계층) 로드 밸런서다.  
HTTP/HTTPS 요청을 이해할 수 있기 때문에 다음 기능을 지원한다.

- 쿼리 문자열 기반 라우팅
- 경로(Path) 기반 라우팅
- 헤더 기반 라우팅
- 대상 그룹(Target Group) 분리

또한, ACM을 사용하면 SSL/TLS 인증서를 손쉽게 적용할 수 있으며  
자동 갱신 기능으로 운영 부담도 줄일 수 있다.

👉 쿼리 기반 라우팅 + HTTPS 암호화 요구사항을 모두 충족한다.  
따라서 이 선택지는 문제 조건에 정확히 부합한다.

---

### ❌ 선택지 2
**Network Load Balancer(NLB) + IAM 인증서 + 쿼리 매개변수 기반 라우팅**

NLB는 4계층(전송 계층)에서 동작한다.  
TCP/UDP 수준에서 패킷을 전달하기 때문에  
HTTP 요청 내부 구조(쿼리 문자열)를 해석하지 못한다.

즉, **쿼리 매개변수 기반 라우팅 자체가 불가능하다.**

따라서 요구사항을 충족하지 못한다.

---

### ❌ 선택지 3
**Gateway Load Balancer(GWLB) + IAM 인증서 + HTTP 경로 기반 라우팅**

GWLB는 3계층 중심으로 동작하며  
보안 어플라이언스(방화벽, IDS/IPS 등)를 연결하는 목적의 서비스다.

- HTTP 경로 기반 라우팅 기능을 제공하지 않는다.
- 웹 애플리케이션 트래픽 분산용이 아니다.

따라서 애플리케이션 계층의 세밀한 라우팅 요구사항에 부적합하다.

---

### ❌ 선택지 4
**ACM 인증서 + Network Load Balancer(NLB) + 쿼리 매개변수 기반 라우팅**

ACM을 사용해 암호화는 가능하다.  
그러나 NLB는 4계층 로드 밸런서이므로  
쿼리 문자열 기반 라우팅을 지원하지 않는다.

암호화 요건은 충족하지만,  
가장 중요한 라우팅 요구사항을 만족하지 못한다.

---

## ✅ 최종 정답

**선택지 1번 (ACM + Application Load Balancer + 쿼리 매개변수 기반 라우팅)**

---

## 🧠 시험 포인트 정리

- 쿼리/경로/헤더 기반 라우팅 → **ALB**
- TCP/UDP 고성능 처리 → **NLB**
- 네트워크 보안 장비 연결 → **GWLB**
- TLS 인증서 관리 → **ACM**

HTTP 요청 내용을 기반으로 라우팅해야 한다면  
무조건 7계층 로드 밸런서(ALB)를 먼저 떠올리는 것이 시험 전략상 유리하다.
