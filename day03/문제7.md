## ✅ 문제

한 회사가 AWS에서 여러 **Windows 워크로드**를 실행한다.

회사 직원은 **두 개의 Amazon EC2 인스턴스**에서 호스팅되는 **Windows 파일 공유(Windows File Share)** 를 사용한다.

- 파일 공유는 **서로 간에 데이터를 동기화**한다.
- 파일 공유는 **복제본(Replica)을 유지**한다.
- 회사는 사용자가 **현재 파일에 액세스하는 방식(Windows 파일 공유 방식)** 을 그대로 유지하길 원한다.
- 회사는 **높은 가용성(High Availability)** 과 **뛰어난 내구성(Durability)** 을 갖춘 스토리지 솔루션을 원한다.

솔루션 설계자는 위 요구사항을 만족해야 한다.

---

## 📌 요구사항 분석

이 문제는 “스토리지” 문제처럼 보이지만 실제로는  
**Windows 파일 공유 방식(SMB 기반)을 그대로 유지하면서, 관리 부담을 줄이고 HA/내구성을 확보하는 서비스 선택** 문제다.

### 1) Windows 파일 공유
- “Windows 파일 공유”는 일반적으로 **SMB(Server Message Block)** 프로토콜 기반 공유를 의미한다.
- 사용자 입장에서는 기존처럼:
  - `\\fileserver\share` 같은 경로로 접근하고
  - Windows 권한(ACL) 기반으로 접근 제어를 하며
  - Windows Explorer/네트워크 드라이브 매핑 등 기존 워크플로우를 유지한다.

따라서 단순히 “파일을 저장할 곳”이 아니라  
**Windows 네이티브 파일 서버 기능을 제공하는 스토리지**가 필요하다.

---

### 2) 데이터 동기화 및 복제 유지
현재는 EC2 2대가 파일 공유를 제공하면서 서로 동기화/복제를 수행하고 있다.  
즉 회사는:

- 동일 데이터의 복제본을 유지하고
- 특정 인스턴스 장애 시에도 다른 쪽에서 데이터 접근이 가능하게 하고 싶다.

이 기능을 계속 유지하려면  
**데이터 복제가 기본 설계에 포함된 서비스**가 적합하다.

---

### 3) 현재 파일 접근 방식 보존
“사용자가 현재 파일에 액세스하는 방식을 보존”이라는 문구가 굉장히 강력하다.

즉, 사용자 경험(접속 방식)을 바꾸지 않아야 한다.

- S3처럼 API 기반 접근으로 바꾸거나
- IAM 권한으로 접근하게 만들거나
- FTP/SFTP로 파일을 올리고 받는 방식으로 바꾸는 것은
요구사항에 맞지 않는다.

---

### 4) 높은 가용성 (High Availability)
문제에서 말하는 높은 가용성은 보통 다음을 의미한다.

- 인스턴스 1대가 장애가 나도 서비스가 끊기지 않음
- AZ 단위 장애가 나도 서비스가 계속 유지될 수 있음(다중 AZ)
- 자동 장애 조치(Failover)가 가능해야 함

즉 “두 대 EC2에 수동 복제” 같은 방식보다  
AWS에서 제공하는 **다중 AZ 관리형 서비스**가 맞는 방향이다.

---

### 5) 뛰어난 내구성 (Durability)
내구성은 “데이터가 얼마나 안전하게 보존되는가”를 의미한다.

- 디스크 장애, 인스턴스 장애, AZ 장애 등에서도
  데이터 손실을 최소화하거나 방지해야 한다.
- 관리형 서비스에서 **자동 복제/자동 백업**이 중요한 요소가 된다.

---

##  요구사항과 관련된 AWS 서비스 (문제에서 핵심 후보)

### ✅ Amazon FSx for Windows File Server
Windows 파일 공유 요구사항이 나오면 가장 먼저 떠올려야 하는 서비스다.

FSx for Windows File Server의 특징은 다음과 같다.

- **완전 관리형 Windows 파일 서버**
  - 직접 Windows 파일 서버를 구축/패치/운영하지 않아도 된다.
- **Windows 네이티브 파일 시스템 기능 제공**
  - SMB 파일 공유 제공
  - Windows 권한(ACL), Active Directory 연동 등 Windows 환경 친화적
- **다중 AZ 구성 지원**
  - 여러 AZ에 걸쳐 자동 복제를 구성할 수 있다.
  - 장애 시 자동 페일오버가 가능하다.
- **동기화/복제에 대한 운영 부담 감소**
  - 기존처럼 EC2 두 대를 직접 동기화 관리하지 않아도 된다.
  - 서비스 차원에서 복제/고가용성을 제공하는 방향이다.

---

### 참고 개념 정리 (문제에서 등장한 용어들)

#### 가용 영역(AZ)
리전 안에 존재하는 “독립된 데이터센터 집합”이다.  
한 AZ에 문제가 생겨도 다른 AZ는 영향을 덜 받도록 구성된다.

#### 리전(Region)
지리적으로 분리된 AWS의 서비스 제공 지역이다.  
각 리전은 여러 AZ로 구성된다.

#### 데이터센터
서버·네트워크·스토리지 등의 인프라가 모여 있는 시설이다.

---

## 🎯 선택지 분석

### ❌ 선택지 1  
**모든 데이터를 Amazon S3로 마이그레이션 + IAM 인증 설정**

- S3는 **객체 스토리지(Object Storage)** 이다.
- “Windows 파일 공유”처럼 SMB 경로로 접근하는 방식과 다르다.
- 사용자가 `\\server\share`로 접근하는 구조를 유지하기 어렵다.
- IAM 기반 접근 제어는 Windows 파일 공유 경험과 완전히 다르다.

따라서 “현재 파일 접근 방식 보존” 요구사항을 만족하지 못한다.

---

### ❌ 선택지 2  
**Amazon S3 File Gateway 설정 후 기존 EC2에 탑재**

S3 File Gateway는:

- 온프레미스/일부 환경에서 S3를 파일처럼 보이게 하는 구조다.
- 파일을 S3 객체로 변환하여 저장한다.

하지만 이 문제는 단순히 “S3를 파일처럼 쓰기”가 아니라  
**Windows 파일 공유(네이티브) + 동기화/복제 + HA/내구성**을 요구한다.

S3 File Gateway는 “하이브리드 파일 접근”에는 도움 되지만  
Windows 파일 서버 자체를 완전히 대체하는 솔루션으로는 핵심 요구사항과 결이 다를 수 있다.

특히 Windows 파일 공유 환경을 그대로 유지하고  
서비스 차원에서 고가용성과 복제를 제공하는 목적에는  
FSx가 더 직접적인 정답이다.

---

### ✅ 선택지 3  
**다중 AZ 구성으로 Windows 파일 서버용 Amazon FSx 확장 + 데이터 마이그레이션**

이 선택지가 요구사항을 가장 정확하게 충족한다.

- Windows 파일 공유 방식(SMB)을 그대로 제공한다.
- 사용자는 기존처럼 파일 공유에 접근할 수 있다.
- 다중 AZ 구성으로 고가용성 확보가 가능하다.
- 자동 복제/내구성 제공으로 데이터 안정성이 높다.
- EC2 두 대를 직접 동기화/복제 관리하던 운영 부담이 줄어든다.

따라서 요구사항(접근 방식 유지 + HA + 내구성 + 동기화/복제)에 가장 적합하다.

---

### ❌ 선택지 4  
**다중 AZ 구성으로 Amazon EFS 확장 + 마이그레이션**

EFS는 기본적으로:

- Linux 환경에서 많이 쓰는 **NFS 기반 파일 시스템**이다.
- Windows 파일 공유(SMB)와는 프로토콜/접근 방식이 다르다.

즉, 사용자가 기존 Windows 파일 공유 방식으로 접근하는 요구사항을 만족시키기 어렵다.  
Windows 워크로드 중심인 문제에서 EFS는 정답 후보가 되기 힘들다.

---

##  최종 정답

✅ **선택지 3번**  
**다중 AZ 구성을 사용하여 Windows 파일 서버용 Amazon FSx로 확장하고 모든 데이터를 FSx for Windows File Server로 마이그레이션한다.**